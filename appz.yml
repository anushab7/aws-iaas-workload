app:
  name: AWS Workload
  code: AWSWORKLOAD
  notify: appzdev@cloudbourne.co

build:
  version: 0.2
  env: DEV
  build_file: none
  output_files: output/*.zip
  image_template: aws-0.2
  image_name: alpha/aws-0.2

deploy:
  context: alpha/DEV
  replicas: 1

monitor:
  notify: appzops@cloudbourne.co      

properties:
# AppZ Ansible Playbook -aws-cft-postgresdb,aws-cft-lambda,aws-cft-rds,aws-cft-redshift,aws-cft-s3
  APPZ_PLAYLIST: aws-cft-s3,aws-cft-postgresdb
  PLAY_HOST: 127.0.0.1
  
# AWS
  AWS_ACCESS_KEY:
    vault: AWS_ACCESS_KEY
  AWS_SECRET_KEY:
    vault: AWS_SECRET_KEY
  AWS_REGION: us-east-2
  REDSHIFT_MASTER_PASS:
    vault: REDSHIFT_MASTER_PASS
  POSTGRESDB_MASTER_PASSWORD:
    vault: POSTGRESDB_MASTER_PASSWORD
  SQLSERVER_PASSWORD:
    vault: SQLSERVER_PASSWORD
  AURORA_MYSQL_MASTER_PASSWORD:
    vault: AURORA_MYSQL_MASTER_PASSWORD
    
# S3
  S3_STACK_NAME: appz-AWS-CFT-S3
  S3_BUCKETNAME: appz-bucket-appz

# Lambda
  LAMBDA_STACK_NAME: appz-Lambda-Stack
  AWS_CF_TEMPLATE: cloudformation.yaml.j2

# REDSHIFT
  REDSHIFT_STACK_NAME: appz-Redshift-Stack
  REDSHIFT_MASTER_USER: test
  REDSHIFT_DBPORT: 5439
  REDSHIFT_SECURITYGROUPID: sg-4d4ff324
  REDSHIFT_CIDRIP: 0.0.0.0/0

# Postgres
  POSTGRESDB_STACK_NAME: appz-postgres-stack
  POSTGRESDB_USER: test
  POSTGRESDB_MASTER_NAME: testdb
  
# RDS
  RDS_STACK_NAME: appz-RDS-Stack
  ENGINE: sqlserver-se
  DBINSTANCECLASS: db.t3.xlarge
  SQLSERVER_USERNAME: appz
  SQLSERVER_DBPORT: 1433
  RDS_CIDR: 0.0.0.0/0
  RDS_SECURITYGROUPID: sg-4d4ff324
  
  # SQS
  SQS_QUEUE_NAME: testqueue
  SQS_STACK_NAME: test
  
  # AURORA MYSQL
  AURORA_MYSQL_STACK_NAME: auroramysql
  AURORA_MYSQL_MASTER_USERNAME: master
  AURORA_MYSQL_DATABASE_NAME: TESTMYSQLDB
  AURORA_MYSQL_CLUSTER_NAME: mysqlcluster

# common properties  
  APPZ_TEARDOWN_TOKEN: 20200721-1655
  revision : 06
